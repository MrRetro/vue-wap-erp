webpackJsonp([3],{Um1X:function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,'\n.scroll-box[data-v-631eeb42] {\n  -webkit-overflow-scrolling: touch;\n  overflow-y: auto;\n}\n.app-init[data-v-631eeb42] {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n}\n.flex-center[data-v-631eeb42] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.full-parent[data-v-631eeb42] {\n  width: 100%;\n  height: 100%;\n}\n.slide-go-leave[data-v-631eeb42] {\n  -webkit-transform: translate3d(0, 0, 0);\n  -webkit-transform: translate3d(0, 0, 0);\n  transform: translate3d(0, 0, 0);\n}\n.slide-go-enter-active[data-v-631eeb42],\n.slide-go-leave-active[data-v-631eeb42],\n.slide-back-enter-active[data-v-631eeb42],\n.slide-back-leave-active[data-v-631eeb42] {\n  -webkit-transition: transform 0.2s cubic-bezier(0.55, 0, 0.1, 1);\n  -webkit-transition: -webkit-transform 0.2s cubic-bezier(0.55, 0, 0.1, 1);\n  transition: -webkit-transform 0.2s cubic-bezier(0.55, 0, 0.1, 1);\n  transition: transform 0.2s cubic-bezier(0.55, 0, 0.1, 1);\n  transition: transform 0.2s cubic-bezier(0.55, 0, 0.1, 1), -webkit-transform 0.2s cubic-bezier(0.55, 0, 0.1, 1);\n}\n.slide-go-leave-to[data-v-631eeb42] {\n  -webkit-transform: translate3d(-100%, 0, 0);\n  -webkit-transform: translate3d(-100%, 0, 0);\n  transform: translate3d(-100%, 0, 0);\n}\n.slide-go-enter[data-v-631eeb42] {\n  -webkit-transform: translate3d(100%, 0, 0);\n  -webkit-transform: translate3d(100%, 0, 0);\n  transform: translate3d(100%, 0, 0);\n}\n.slide-go-enter-to[data-v-631eeb42] {\n  -webkit-transform: translate3d(0%, 0, 0);\n  -webkit-transform: translate3d(0%, 0, 0);\n  transform: translate3d(0%, 0, 0);\n}\n.slide-back-leave[data-v-631eeb42] {\n  -webkit-transform: translate3d(0, 0, 0);\n  -webkit-transform: translate3d(0, 0, 0);\n  transform: translate3d(0, 0, 0);\n}\n.slide-back-leave-to[data-v-631eeb42] {\n  -webkit-transform: translate3d(100%, 0, 0);\n  -webkit-transform: translate3d(100%, 0, 0);\n  transform: translate3d(100%, 0, 0);\n}\n.slide-back-enter[data-v-631eeb42] {\n  -webkit-transform: translate3d(-100%, 0, 0);\n  -webkit-transform: translate3d(-100%, 0, 0);\n  transform: translate3d(-100%, 0, 0);\n}\n.slide-back-enter-to[data-v-631eeb42] {\n  -webkit-transform: translate3d(0%, 0, 0);\n  -webkit-transform: translate3d(0%, 0, 0);\n  transform: translate3d(0%, 0, 0);\n}\n.fade-enter-active[data-v-631eeb42] {\n  -webkit-transition: all 0.5s;\n  transition: all 0.5s;\n}\n.fade-leave-active[data-v-631eeb42] {\n  -webkit-transition: all 0.5s;\n  transition: all 0.5s;\n}\n.fade-enter[data-v-631eeb42],\n.fade-leave-to[data-v-631eeb42] {\n  opacity: 0;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n  filter: alpha(opacity=0);\n}\n.md-radio-content[data-v-631eeb42] {\n  font-size: 0.597333333333333rem;\n}\ninput[data-v-631eeb42]::-webkit-input-placeholder {\n  color: #b0b0b0;\n}\n.box-shadow[data-v-631eeb42] {\n  -webkit-box-shadow: 0rem 0.085333333333333rem 0.256rem rgba(0,0,0,0.16);\n  box-shadow: 0rem 0.085333333333333rem 0.256rem rgba(0,0,0,0.16);\n}\n.touch-opacity[data-v-631eeb42]:active {\n  opacity: 0.7;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";\n  filter: alpha(opacity=70);\n}\n.ellipsis[data-v-631eeb42] {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.container[data-v-631eeb42] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow-y: auto;\n  height: 100%;\n}\n.container .input-box2[data-v-631eeb42] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  height: calc(100% - 50px);\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow-y: auto;\n}\n.container .input-box2 .title[data-v-631eeb42] {\n  margin-left: 0.597333333333333rem;\n  padding-left: 0.426666666666667rem;\n  margin-right: 0.597333333333333rem;\n  line-height: 1.024rem;\n  font-size: 0.597333333333333rem;\n  text-align: left;\n  font-family: "PingFang SC";\n  font-weight: 500;\n  color: #8d8d8d;\n  padding-top: 0.682666666666667rem;\n  border-top: 1px solid #f2f2f2;\n}\n.hideName[data-v-631eeb42] {\n  display: none;\n}',"",{version:3,sources:["D:/Work/myGithub/vue-wap-erp/src/modules/plan/add/index.vue"],names:[],mappings:";AACA;EACE,kCAAkC;EAClC,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,QAAQ;EACR,SAAS;EACT,UAAU;EACV,OAAO;CACR;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,0BAA0B;MACtB,uBAAuB;UACnB,oBAAoB;CAC7B;AACD;EACE,YAAY;EACZ,aAAa;CACd;AACD;EACE,wCAAwC;EACxC,wCAAwC;EACxC,gCAAgC;CACjC;AACD;;;;EAIE,iEAAiE;EACjE,yEAAyE;EACzE,iEAAiE;EACjE,yDAAyD;EACzD,+GAA+G;CAChH;AACD;EACE,4CAA4C;EAC5C,4CAA4C;EAC5C,oCAAoC;CACrC;AACD;EACE,2CAA2C;EAC3C,2CAA2C;EAC3C,mCAAmC;CACpC;AACD;EACE,yCAAyC;EACzC,yCAAyC;EACzC,iCAAiC;CAClC;AACD;EACE,wCAAwC;EACxC,wCAAwC;EACxC,gCAAgC;CACjC;AACD;EACE,2CAA2C;EAC3C,2CAA2C;EAC3C,mCAAmC;CACpC;AACD;EACE,4CAA4C;EAC5C,4CAA4C;EAC5C,oCAAoC;CACrC;AACD;EACE,yCAAyC;EACzC,yCAAyC;EACzC,iCAAiC;CAClC;AACD;EACE,6BAA6B;EAC7B,qBAAqB;CACtB;AACD;EACE,6BAA6B;EAC7B,qBAAqB;CACtB;AACD;;EAEE,WAAW;EACX,iEAAiE;EACjE,yBAAyB;CAC1B;AACD;EACE,gCAAgC;CACjC;AACD;EACE,eAAe;CAChB;AACD;EACE,wEAAwE;EACxE,gEAAgE;CACjE;AACD;EACE,aAAa;EACb,kEAAkE;EAClE,0BAA0B;CAC3B;AACD;EACE,iBAAiB;EACjB,wBAAwB;EACxB,oBAAoB;CACrB;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,6BAA6B;EAC7B,8BAA8B;MAC1B,2BAA2B;UACvB,uBAAuB;EAC/B,oBAAoB;MAChB,YAAY;UACR,QAAQ;EAChB,iBAAiB;EACjB,aAAa;CACd;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,0BAA0B;EAC1B,6BAA6B;EAC7B,8BAA8B;MAC1B,2BAA2B;UACvB,uBAAuB;EAC/B,oBAAoB;MAChB,YAAY;UACR,QAAQ;EAChB,iBAAiB;CAClB;AACD;EACE,kCAAkC;EAClC,mCAAmC;EACnC,mCAAmC;EACnC,sBAAsB;EACtB,gCAAgC;EAChC,iBAAiB;EACjB,2BAA2B;EAC3B,iBAAiB;EACjB,eAAe;EACf,kCAAkC;EAClC,8BAA8B;CAC/B;AACD;EACE,cAAc;CACf",file:"index.vue",sourcesContent:['\n.scroll-box[data-v-631eeb42] {\n  -webkit-overflow-scrolling: touch;\n  overflow-y: auto;\n}\n.app-init[data-v-631eeb42] {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n}\n.flex-center[data-v-631eeb42] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.full-parent[data-v-631eeb42] {\n  width: 100%;\n  height: 100%;\n}\n.slide-go-leave[data-v-631eeb42] {\n  -webkit-transform: translate3d(0, 0, 0);\n  -webkit-transform: translate3d(0, 0, 0);\n  transform: translate3d(0, 0, 0);\n}\n.slide-go-enter-active[data-v-631eeb42],\n.slide-go-leave-active[data-v-631eeb42],\n.slide-back-enter-active[data-v-631eeb42],\n.slide-back-leave-active[data-v-631eeb42] {\n  -webkit-transition: transform 0.2s cubic-bezier(0.55, 0, 0.1, 1);\n  -webkit-transition: -webkit-transform 0.2s cubic-bezier(0.55, 0, 0.1, 1);\n  transition: -webkit-transform 0.2s cubic-bezier(0.55, 0, 0.1, 1);\n  transition: transform 0.2s cubic-bezier(0.55, 0, 0.1, 1);\n  transition: transform 0.2s cubic-bezier(0.55, 0, 0.1, 1), -webkit-transform 0.2s cubic-bezier(0.55, 0, 0.1, 1);\n}\n.slide-go-leave-to[data-v-631eeb42] {\n  -webkit-transform: translate3d(-100%, 0, 0);\n  -webkit-transform: translate3d(-100%, 0, 0);\n  transform: translate3d(-100%, 0, 0);\n}\n.slide-go-enter[data-v-631eeb42] {\n  -webkit-transform: translate3d(100%, 0, 0);\n  -webkit-transform: translate3d(100%, 0, 0);\n  transform: translate3d(100%, 0, 0);\n}\n.slide-go-enter-to[data-v-631eeb42] {\n  -webkit-transform: translate3d(0%, 0, 0);\n  -webkit-transform: translate3d(0%, 0, 0);\n  transform: translate3d(0%, 0, 0);\n}\n.slide-back-leave[data-v-631eeb42] {\n  -webkit-transform: translate3d(0, 0, 0);\n  -webkit-transform: translate3d(0, 0, 0);\n  transform: translate3d(0, 0, 0);\n}\n.slide-back-leave-to[data-v-631eeb42] {\n  -webkit-transform: translate3d(100%, 0, 0);\n  -webkit-transform: translate3d(100%, 0, 0);\n  transform: translate3d(100%, 0, 0);\n}\n.slide-back-enter[data-v-631eeb42] {\n  -webkit-transform: translate3d(-100%, 0, 0);\n  -webkit-transform: translate3d(-100%, 0, 0);\n  transform: translate3d(-100%, 0, 0);\n}\n.slide-back-enter-to[data-v-631eeb42] {\n  -webkit-transform: translate3d(0%, 0, 0);\n  -webkit-transform: translate3d(0%, 0, 0);\n  transform: translate3d(0%, 0, 0);\n}\n.fade-enter-active[data-v-631eeb42] {\n  -webkit-transition: all 0.5s;\n  transition: all 0.5s;\n}\n.fade-leave-active[data-v-631eeb42] {\n  -webkit-transition: all 0.5s;\n  transition: all 0.5s;\n}\n.fade-enter[data-v-631eeb42],\n.fade-leave-to[data-v-631eeb42] {\n  opacity: 0;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n  filter: alpha(opacity=0);\n}\n.md-radio-content[data-v-631eeb42] {\n  font-size: 0.597333333333333rem;\n}\ninput[data-v-631eeb42]::-webkit-input-placeholder {\n  color: #b0b0b0;\n}\n.box-shadow[data-v-631eeb42] {\n  -webkit-box-shadow: 0rem 0.085333333333333rem 0.256rem rgba(0,0,0,0.16);\n  box-shadow: 0rem 0.085333333333333rem 0.256rem rgba(0,0,0,0.16);\n}\n.touch-opacity[data-v-631eeb42]:active {\n  opacity: 0.7;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";\n  filter: alpha(opacity=70);\n}\n.ellipsis[data-v-631eeb42] {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.container[data-v-631eeb42] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow-y: auto;\n  height: 100%;\n}\n.container .input-box2[data-v-631eeb42] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  height: calc(100% - 50px);\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow-y: auto;\n}\n.container .input-box2 .title[data-v-631eeb42] {\n  margin-left: 0.597333333333333rem;\n  padding-left: 0.426666666666667rem;\n  margin-right: 0.597333333333333rem;\n  line-height: 1.024rem;\n  font-size: 0.597333333333333rem;\n  text-align: left;\n  font-family: "PingFang SC";\n  font-weight: 500;\n  color: #8d8d8d;\n  padding-top: 0.682666666666667rem;\n  border-top: 1px solid #f2f2f2;\n}\n.hideName[data-v-631eeb42] {\n  display: none;\n}'],sourceRoot:""}])},g3IB:function(e,t,n){var a=n("Um1X");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("2ea38596",a,!1,{})},tOPd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),o=n("exGp"),i=n.n(o),s=n("Dd8w"),l=n.n(s),A=n("//Fk"),c=n.n(A),d=n("mvHQ"),C=n.n(d),b=n("yelY"),f=n("1CjK"),m=n("3r8y"),u=n("Gtft"),p=n("N6PA"),v=n("heE5"),E=n("6D10"),k={name:"plan-add",extends:m.a,created:function(){var e=this;this.params=this.$route.params;var t=this.params;t&&t.id?(this.id=t.id,this.form.type="edit"):this.form.type="add","add"===this.form.type?this.getPage({}):Object(b.j)(this.id).then(function(t){e.getPage(t)}).catch(function(e){console.log(e)})},data:function(){return{initData:null,id:null,params:this.$route.params,form:{type:"add",data:[]},hasValue:!1}},methods:{isEdit:function(){return this.initData!==C()(this.form)},onBtnClick:function(){var e=this,t=this.$refs.va.map(function(e){return e.changeV()});c.a.all(t).then(function(t){if(t.every(function(e){return e})){console.log(e.form,"校验成功并提交数据");var n={};e.form.data.forEach(function(e){if("group"!==e.attr){var t="";t=e.value?e.value:0===e.value?0:e.text,console.log(t,"item"),n[e.attr]=t}"remark"===e.attr&&(n[e.attr]=e.text),"responsibleId"===e.attr&&(e.text.length<=0?n[e.attr]="":n[e.attr]=e.text&&e.text[e.text.length-1]),"teamworkIds"===e.attr&&(""===e.text?n[e.attr]=[]:n[e.attr]=e.text)});var a=n.plannedTime;n.plannedTime=Object(v.a)(a);n.target={customer:0,clue:1,agent:2}[e.params.type]||0,console.log(n,"校验成功并提交数据--01"),console.log(e.form),"add"===e.form.type?Object(b.a)(n).then(function(t){console.log(t),console.log("要直接跳详情"),e.$RouteUtil.commonDetail(l()({},e.params,{id:t})),console.log(t,"--------01---------")}).catch(function(e){console.log(e,"--------02---------")}):"edit"===e.form.type&&(n.id=e.id,console.log(n),Object(b.d)(n).then(function(t){console.log(t,""),e.params.onSuccess&&e.params.onSuccess(),e.$router.go(-1)}).catch(function(e){return console.log(e)}))}})},getPage:function(e){var t=this;return i()(r.a.mark(function n(){var a,o,i,s,l,A,c,d,m,u,v,k,g,w,x;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.menu,o=a.followUpTarget,i=[],s=a.clueAdditionalConfiguration,l=null,A=null,c=a.clueIntentionType,d=a.clueShoppingWay,m=a.gender,u=a.customerOrigin,v=a.customerType,"clue"===t.params.type||"agent"===t.params.type){n.next=16;break}return n.next=14,Object(b.m)(""+t.params.type);case 14:k=n.sent,i=k.map(function(e){return{key:e.description,value:e.value}});case 16:return n.next=18,Object(b.e)();case 18:g=n.sent,console.log(g,"=========================>success"),w=[],g.forEach(function(e){console.log(e),"create-follow-up"===e.code&&"add"===t.form.type&&(w=e.fields),"edit-follow-up"===e.code&&"edit"===t.form.type&&(w=e.fields)}),w.sort(function(e,t){return e.sort-t.sort}),x=[],w.forEach(function(n){var a={attr:n.attr,type:f.a[n.configsObj.type],title:n.name,text:"",value:null,placeholder:n.configsObj.placeholder,indent:!1,selData:{source:[{key:"下单客户1",value:1},{key:"下单客户2",value:2}],selectedKey:"下单客户1"}};if("targetId"===n.attr&&("agent"===t.params.type&&(a.title="跟进经纪人",a.placeholder="请选择跟进经纪人"),"customer"===t.params.type&&(a.title="跟进客户",a.placeholder="请选择跟进客户"),a.params=t.params),e[a.attr]){if(a.value=e[a.attr],a.text=e[a.attr],"targetId"===a.attr&&("agent"===t.params.type&&(a.title="跟进经纪人",a.placeholder="请选择跟进经纪人"),a.text=e.targetId.targetName,a.value=e.targetId.targetId,a.disable=!0,t.getExecutor(a.value,t.params.type)),"plannedTime"===a.attr){var r=e.plannedTime;r.length>10&&(r=r.substring(0,10)),a.text=r,a.value=r}if("purpose"===a.attr){var C="";i.forEach(function(t){t.value===e[a.attr]&&(C=t.key)}),a.text=C,a.value=e[a.attr]}"responsibleId"===a.attr&&(a.text=[e.responsibleId]),"teamworkIds"===a.attr&&(a.text=e.teamworkIds),"remark"===a.attr&&(a.text=Object(E.b)(e[a.attr]),a.value=Object(E.b)(e[a.attr]))}var b=!1;n.rulesObj&&n.rulesObj.forEach(function(e){"required"===e.type&&(b=!0)});var k=Object(p.a)(n);switch(b&&(a.required=b),k&&(a.rules=k),n.attr){case"target":a.selData.source=o.map(function(e){return{key:e.name,value:e.code}});break;case"purpose":a.selData.source=i;break;case"vehicleModelId":a.selData.source=s.map(function(e){return{key:e.name,value:e.code}});break;case"intentionType":case"intentionGrade":a.selData.source=c.map(function(e){return{key:e.name,value:e.code}});break;case"shoppingWay":a.selData.source=d.map(function(e){return{key:e.name,value:e.code}});break;case"appearance":a.selData=l;break;case"interior":a.selData=A;break;case"gender":a.selData.source=m.map(function(e){return{key:e.name,value:e.code}});break;case"origin":a.selData.source=u.map(function(e){return{key:e.name,value:e.code}});break;case"type":a.selData.source=v.map(function(e){return{key:e.name,value:e.code}})}x.push(a)}),t.form.data=x,console.log(t.form.data,"-----031"),t.initData=C()(t.form);case 28:case"end":return n.stop()}},n,t)}))()},getExecutor:function(e,t){var n=this;t=t||this.params.type,console.log(this.params),Object(b.f)({id:e,type:t}).then(function(e){console.log(e,"负责人"),console.log(n.$refs.check),console.log(n.$refs.check[1].$attrs.attr),n.$refs.check&&(n.$refs.check.forEach(function(t){t.$attrs&&t.$attrs.attr&&"responsibleId"===t.$attrs.attr&&(t.newOptions=e.responsibleMans.map(function(e){return{label:e.userName,value:e.userId}}),console.log(t.newOptions,"==>负责")),t.$attrs&&t.$attrs.attr&&"teamworkIds"===t.$attrs.attr&&(t.newOptions=e.teamworkMans.map(function(e){return{label:e.userName,value:e.userId}}),console.log(t.newOptions,"==>协同"))}),n.hasValue=!0)}).catch(function(e){console.log(e,"负责人错误")})},selClue:function(e){this.getExecutor(e.id)}},activated:function(){u.a.setRight()}},g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"input-box2"},[n("cube-scroll",[e._l(e.form.data,function(t,a){return["groupHeader"===t.type&&e.hasValue?n("div",{key:a,staticClass:"title",attrs:{attr:t.attr}},[e._v(e._s(t.title))]):e._e(),e._v(" "),"checkbox"===t.type?n("yi-check",e._b({key:a,ref:"check",refInFor:!0,attrs:{checkList:t.text,options:[]},on:{"update:checkList":function(n){e.$set(t,"text",n)}}},"yi-check",t,!1)):"purpose"!==t.attr||"clue"!==e.params.type&&"agent"!==e.params.type?"groupHeader"!==t.type?n("yi-input",e._b({key:a,ref:t.rules.required?"va":null,refInFor:!0,attrs:{indent:!0,value:t.value,selData:t.selData||null,line:a===e.form.data.length-1,lineTop:0!=a,params:t.params},on:{"update:value":function(n){e.$set(t,"value",n)},selClue:e.selClue},model:{value:t.text,callback:function(n){e.$set(t,"text",n)},expression:"item.text"}},"yi-input",t,!1)):e._e():n("div",{key:a,staticStyle:{display:"none"}})]})],2)],1),e._v(" "),n("yi-btn-box",{attrs:{name:"确认提交"},on:{onBtnClick:e.onBtnClick}})],1)};g._withStripped=!0;var w={render:g,staticRenderFns:[]},x=w;var h=!1;var B=n("VU/8")(k,x,!1,function(e){h||n("g3IB")},"data-v-631eeb42",null);B.options.__file="src\\modules\\plan\\add\\index.vue";t.default=B.exports}});